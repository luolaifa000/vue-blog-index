{"remainingRequest":"D:\\developer\\www\\vue-blog-index\\node_modules\\thread-loader\\dist\\cjs.js!D:\\developer\\www\\vue-blog-index\\node_modules\\babel-loader\\lib\\index.js!D:\\developer\\www\\vue-blog-index\\src\\modules\\manage\\router\\router.js","dependencies":[{"path":"D:\\developer\\www\\vue-blog-index\\src\\modules\\manage\\router\\router.js","mtime":1584502969264},{"path":"D:\\developer\\www\\vue-blog-index\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1555406884439},{"path":"D:\\developer\\www\\vue-blog-index\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1572402791037},{"path":"D:\\developer\\www\\vue-blog-index\\node_modules\\babel-loader\\lib\\index.js","mtime":1565229057131}],"contextDependencies":[],"result":["import _toConsumableArray from \"D:\\\\developer\\\\www\\\\vue-blog-index\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport Vue from 'vue';\nimport store from \"@/store/index\";\nimport Router from 'vue-router';\nimport NotFound from '@/404';\nimport manage from \"./manage\";\nVue.use(Router);\nvar router = new Router({\n  // mode: 'history',\n  mode: \"hash\",\n  routes: [{\n    path: '*',\n    component: NotFound\n  }].concat(_toConsumableArray(manage)),\n  // 新开页面滚动条回到顶部，后退回到之前位置\n  scrollBehavior: function scrollBehavior(to, from, savedPosition) {\n    if (savedPosition) {\n      return savedPosition;\n    } else {\n      return {\n        x: 0,\n        y: 0\n      };\n    }\n  }\n});\nrouter.beforeEach(function (to, from, next) {\n  // 使用钩子函数对路由进行权限跳转\n  // 如果用户已经登录，访问登录和注册时，自动跳转到首页\n  var isadmin = store.state.user.user.admin; // 判断该路由是否需要登录权限\n\n  if (to.meta.requireAuth) {\n    if (isadmin) {\n      // 通过vuex state获取是否管理员\n      next();\n    } else {\n      next({\n        path: '/login',\n        query: {\n          redirect: to.fullPath\n        } // 将跳转的路由path作为参数，登录成功后跳转到该路由\n\n      });\n    }\n  } else {\n    next();\n  }\n\n  if (isadmin && to.path == \"/login\") {\n    next(\"/articlelist\");\n  }\n});\nexport default router;",null]}