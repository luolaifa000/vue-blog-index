{"remainingRequest":"D:\\developer\\www\\vue-blog-index\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\developer\\www\\vue-blog-index\\src\\modules\\manage\\page\\link.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\developer\\www\\vue-blog-index\\src\\modules\\manage\\page\\link.vue","mtime":1584589959756},{"path":"D:\\developer\\www\\vue-blog-index\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1555406884439},{"path":"D:\\developer\\www\\vue-blog-index\\node_modules\\babel-loader\\lib\\index.js","mtime":1565229057131},{"path":"D:\\developer\\www\\vue-blog-index\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1555406884439},{"path":"D:\\developer\\www\\vue-blog-index\\node_modules\\vue-loader\\lib\\index.js","mtime":1584631609333}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport page from '@/components/page'\r\nexport default {\r\n  components: {\r\n    page\r\n  },\r\n  data() {\r\n    return {\r\n      title: '新增友情链接',\r\n      dialogFormVisible: false,\r\n      loading: true,\r\n      links: [],\r\n      form: {\r\n        title: '',\r\n        url: '',\r\n        img: '',\r\n        desc: '',\r\n        end_time: ''\r\n      },\r\n      pageModel: {\r\n        page: 1,\r\n        all: 1,\r\n        sumCount: 10\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getLink()\r\n  },\r\n  methods: {\r\n    getLink() {\r\n      this.$post('/api/v2/link/list', this.pageModel).then(res => {\r\n        this.links = res.data.data\r\n        this.pageModel.sumCount = res.data.total\r\n        this.loading = false\r\n      })\r\n    },\r\n    selectRoleList() {\r\n      this.getLink()\r\n    },\r\n    deleteBtn(item) {\r\n      this.$confirm('是否删除该链接?', '提示', {\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.$post('/api/v2/link/delete', {id: item.id}).then(res => {\r\n          this.$message.success(res.message)\r\n          this.links.splice(this.links.indexOf(item), 1)\r\n        })\r\n      }).catch(() => {     \r\n      })\r\n    },\r\n    addBtn() {\r\n      this.title = '新增友情链接'\r\n      this.dialogFormVisible = true\r\n      this.form = {\r\n        title: '',\r\n        href: '',\r\n        end_time: ''\r\n      }\r\n    },\r\n    addSubmit() {\r\n      this.$post('/api/v2/link/add', this.form).then(res => {\r\n        this.$message.success(res.message)\r\n        this.dialogFormVisible = false\r\n        this.getLink()\r\n      }).catch({})\r\n    },\r\n    editBtn(item) {\r\n      this.title = '编辑友情链接'\r\n      this.dialogFormVisible = true\r\n      // 复制对象不修改原对象\r\n      this.form = Object.assign({}, item)\r\n    },\r\n    editSubmit() {\r\n      this.$post('/api/v2/link/edit', this.form).then(res => {\r\n        this.$message.success(res.message)\r\n        this.dialogFormVisible = false\r\n        this.getLink()\r\n      }).catch({})\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["link.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"link.vue","sourceRoot":"src/modules/manage/page","sourcesContent":["<template>\r\n  <main>\r\n    <!-- <header>友情链接</header> -->\r\n    <section class=\"wrap scroll\">\r\n      <el-button type=\"primary\" size=\"small\" @click=\"addBtn\">添 加</el-button>\r\n      <div class=\"main_table\">\r\n        <el-table \r\n          v-loading=\"loading\" \r\n          :data=\"links\" \r\n          stripe \r\n          style=\"width: 100%\" \r\n          max-height=\"600\" \r\n          tooltip-effect=\"dark\">\r\n          <el-table-column prop=\"id\" label=\"编号\" width=\"80\" >\r\n          </el-table-column>\r\n          <el-table-column prop=\"title\" label=\"标题\" show-overflow-tooltip >\r\n          </el-table-column>\r\n          <el-table-column prop=\"url\" label=\"链接\" show-overflow-tooltip >\r\n          </el-table-column>\r\n          <el-table-column prop=\"img\" label=\"头像\" show-overflow-tooltip >\r\n          </el-table-column>\r\n          <el-table-column prop=\"desc\" label=\"描述\" show-overflow-tooltip >\r\n          </el-table-column>\r\n          <el-table-column prop=\"end_time\" label=\"有效期\" show-overflow-tooltip >\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" width=\"180\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"primary\" size=\"mini\" @click=\"editBtn(scope.row)\">编辑</el-button>\r\n              <el-button type=\"danger\" size=\"mini\" @click=\"deleteBtn(scope.row)\">删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <page :pageModel=\"pageModel\" @selectList=\"selectRoleList\" v-if=\"pageModel.sumCount>10\"></page>\r\n      </div>\r\n    </section>\r\n\r\n    <el-dialog :title=\"title\" :visible.sync=\"dialogFormVisible\" class=\"link\">\r\n      <el-form :model=\"form\" label-width=\"130px\">\r\n        <el-form-item label=\"标题\" >\r\n          <el-input v-model=\"form.title\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"链接\" class=\"href\">\r\n          <el-input v-model=\"form.url\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"头像\" class=\"href\">\r\n          <el-input v-model=\"form.img\" clearable></el-input>\r\n        </el-form-item>\r\n          <img :src=\"form.img\" class=\"link-ava\" v-if=\"form.img\">\r\n        <el-form-item label=\"描述\" class=\"href\">\r\n          <el-input v-model=\"form.desc\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"有效期\">\r\n          <el-date-picker\r\n            v-model=\"form.end_time\"\r\n            value-format=\"yyyy-MM-dd\"\r\n            type=\"date\"\r\n            size=\"medium\"\r\n            placeholder=\"选择日期\">\r\n          </el-date-picker>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button size=\"small\" @click=\"dialogFormVisible = false\" >取 消</el-button>\r\n        <el-button size=\"small\" type=\"primary\" @click=\"editSubmit\" v-if=\"form.id\">保存修改</el-button>\r\n        <el-button size=\"small\" type=\"primary\" @click=\"addSubmit\" v-else>保 存</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </main>\r\n</template>\r\n\r\n<script>\r\nimport page from '@/components/page'\r\nexport default {\r\n  components: {\r\n    page\r\n  },\r\n  data() {\r\n    return {\r\n      title: '新增友情链接',\r\n      dialogFormVisible: false,\r\n      loading: true,\r\n      links: [],\r\n      form: {\r\n        title: '',\r\n        url: '',\r\n        img: '',\r\n        desc: '',\r\n        end_time: ''\r\n      },\r\n      pageModel: {\r\n        page: 1,\r\n        all: 1,\r\n        sumCount: 10\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getLink()\r\n  },\r\n  methods: {\r\n    getLink() {\r\n      this.$post('/api/v2/link/list', this.pageModel).then(res => {\r\n        this.links = res.data.data\r\n        this.pageModel.sumCount = res.data.total\r\n        this.loading = false\r\n      })\r\n    },\r\n    selectRoleList() {\r\n      this.getLink()\r\n    },\r\n    deleteBtn(item) {\r\n      this.$confirm('是否删除该链接?', '提示', {\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.$post('/api/v2/link/delete', {id: item.id}).then(res => {\r\n          this.$message.success(res.message)\r\n          this.links.splice(this.links.indexOf(item), 1)\r\n        })\r\n      }).catch(() => {     \r\n      })\r\n    },\r\n    addBtn() {\r\n      this.title = '新增友情链接'\r\n      this.dialogFormVisible = true\r\n      this.form = {\r\n        title: '',\r\n        href: '',\r\n        end_time: ''\r\n      }\r\n    },\r\n    addSubmit() {\r\n      this.$post('/api/v2/link/add', this.form).then(res => {\r\n        this.$message.success(res.message)\r\n        this.dialogFormVisible = false\r\n        this.getLink()\r\n      }).catch({})\r\n    },\r\n    editBtn(item) {\r\n      this.title = '编辑友情链接'\r\n      this.dialogFormVisible = true\r\n      // 复制对象不修改原对象\r\n      this.form = Object.assign({}, item)\r\n    },\r\n    editSubmit() {\r\n      this.$post('/api/v2/link/edit', this.form).then(res => {\r\n        this.$message.success(res.message)\r\n        this.dialogFormVisible = false\r\n        this.getLink()\r\n      }).catch({})\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.link .el-dialog{\r\n  min-width: 600px;\r\n}\r\n</style>\r\n\r\n\r\n<style scoped lang=\"stylus\">\r\n.main_table\r\n  margin-top 20px\r\n.el-form .el-input\r\n  width 220px\r\n.href .el-input\r\n  width 400px\r\n\r\n.link-ava\r\n  width 100px\r\n  height 100px\r\n  margin: 0 0 20px 130px\r\n  object-fit: cover\r\n</style>"]}]}