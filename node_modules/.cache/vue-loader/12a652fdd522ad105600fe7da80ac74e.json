{"remainingRequest":"D:\\developer\\www\\vue-blog-index\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\developer\\www\\vue-blog-index\\src\\modules\\index\\user\\person.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\developer\\www\\vue-blog-index\\src\\modules\\index\\user\\person.vue","mtime":1584589959838},{"path":"D:\\developer\\www\\vue-blog-index\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1555406884439},{"path":"D:\\developer\\www\\vue-blog-index\\node_modules\\babel-loader\\lib\\index.js","mtime":1565229057131},{"path":"D:\\developer\\www\\vue-blog-index\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1555406884439},{"path":"D:\\developer\\www\\vue-blog-index\\node_modules\\vue-loader\\lib\\index.js","mtime":1584631609333}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport marked from 'marked'\r\nimport {mapGetters} from \"vuex\"\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      loading: true,\r\n      comments: {},\r\n      messages: {},\r\n      commentsTotal: 0,\r\n      messagesTotal: 0,\r\n      pageModel1: {\r\n        page: 1,\r\n        sumCount: 10\r\n      },\r\n      pageModel2: {\r\n        page: 1,\r\n        sumCount: 10\r\n      },\r\n    }\r\n  },\r\n  computed: mapGetters([\r\n    'user'\r\n  ]),  \r\n  created() {\r\n    this.getComment()\r\n    this.getMessage()\r\n  },\r\n  methods: {\r\n    getComment() {\r\n      this.$post('/api/v2/comment/person', this.pageModel1).then(res => {\r\n        this.loading = false\r\n        this.commentsTotal = res.data.total\r\n        this.comments = res.data.data\r\n        this.pageModel1.sumCount = res.data.total\r\n      }).catch(() => {})\r\n    },\r\n    selectCommentList() {\r\n      this.getComment()\r\n    },\r\n    // 删除评论\r\n    deleteComment(item) {\r\n      let param = {\r\n        id: item.id\r\n      }\r\n      this.$post('/api/v2/comment/delete', param).then(res => {\r\n        this.comments.splice(this.comments.indexOf(item), 1)\r\n        this.commentsTotal-=1\r\n        this.$Message.success(res.message)\r\n      }).catch(() => {})\r\n    }, \r\n    getMessage() {\r\n      this.$post('/api/v2/message/person', this.pageModel2).then(res => {\r\n        this.loading = false\r\n        this.messages = res.data.data\r\n        this.messagesTotal = res.data.total\r\n        this.pageModel2.sumCount = res.data.total\r\n      }).catch(() => {})\r\n    },\r\n    selectMessageList() {\r\n      this.getMessage()\r\n    },\r\n    // 删除留言\r\n    deleteMessage(item) {\r\n      let param = {\r\n        id: item.id\r\n      }\r\n      this.$post('/api/v2/message/delete', param).then(res => {\r\n        this.messages.splice(this.messages.indexOf(item), 1)\r\n        this.messagesTotal-=1\r\n        this.$Message.success(res.message)\r\n      }).catch(() => {})\r\n    }, \r\n  }, \r\n}\r\n",{"version":3,"sources":["person.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"person.vue","sourceRoot":"src/modules/index/user","sourcesContent":["<template>\r\n  <div class=\"main person higtlight\">\r\n    <TextLoading v-if=\"loading\"></TextLoading>\r\n\r\n    <template v-else>\r\n      <div class=\"leftinfo\">\r\n        <div class=\"info-top\">\r\n          <img :src=\"user.avatar_url ? user.avatar_url : `https://avatars.dicebear.com/v2/identicon/id-${user.id}.svg`\">\r\n          <!-- <img :src=\"`https://avatars.dicebear.com/v2/identicon/id-${user.id}.svg`\" alt=\"\"> -->\r\n          <!-- <img src=\"../../../assets/avatar/009.jpg\" alt=\"\" v-else> -->\r\n          <div class=\"top-text\">\r\n            <p class=\"name\">{{user.name}}</p>\r\n            <p>第<span class=\"pink\">{{user.id}}</span>位注册的用户</p> \r\n            <p>注册于<span class=\"time\">{{user.created_at.substring(0,10)}}</span></p>\r\n          </div>\r\n        </div>\r\n\r\n        <ul>\r\n          <li>邮箱： {{user.email}}</li>\r\n          <li>权限： {{user.admin ? '博主' : '普通用户'}}</li>\r\n          <li>修改头像</li>\r\n          <router-link tag=\"li\" to=\"password\" class=\"link\">\r\n            修改密码\r\n          </router-link>\r\n          <!-- <li>\r\n            我的评论<span class=\"pink\"> ({{comments.length}})</span>\r\n          </li>\r\n          <li>\r\n            我的留言<span class=\"pink\"> ({{messages.length}})</span>\r\n          </li> -->\r\n        </ul>\r\n      </div>\r\n\r\n      <div class=\"rightmain\">\r\n        <div class=\"comment\">\r\n          <h6>我的评论<span class=\"pink\" v-if=\"comments\"> ({{commentsTotal}})</span></h6>\r\n          <ul>\r\n            <li v-for=\"(item, index) in comments\" :key=\"index\">\r\n              <router-link :to=\"{path:`/blog/${item.article.id}`}\">评论文章：{{item.article.title}}</router-link>\r\n              <div class=\"mark\" v-html=\"item.content\" v-highlight></div>\r\n              <p class=\"time\"><Icon type=\"md-time\" />{{item.created_at}}</p>\r\n              <div class=\"delete\"  >\r\n                <Poptip\r\n                  confirm\r\n                  placement=\"left\"\r\n                  title=\"是否删除该评论?\"\r\n                  @on-ok=\"deleteComment(item)\">\r\n                  <Icon type=\"md-trash\" />\r\n                </Poptip>\r\n              </div>\r\n            </li>\r\n            <MyPage :pageModel=\"pageModel1\" @selectList=\"selectCommentList\" v-if=\"pageModel1.sumCount>10\"></MyPage>\r\n          </ul>\r\n          <ul class=\"noneli\" v-if=\"commentsTotal==0\">\r\n            你还没有评论\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"message\">\r\n          <h6>我的留言<span class=\"pink\" v-if=\"messages\"> ({{messagesTotal}})</span></h6>\r\n          <ul>\r\n            <li v-for=\"(item, index) in messages\" :key=\"index\">\r\n              <div class=\"mark\" v-html=\"item.content\" v-highlight></div>\r\n              <p class=\"time\"><Icon type=\"md-time\" />{{item.created_at}}</p>\r\n              <div class=\"delete\"  >\r\n                <Poptip\r\n                  confirm\r\n                  placement=\"left\"\r\n                  title=\"是否删除该留言?\"\r\n                  @on-ok=\"deleteMessage(item)\">\r\n                  <Icon type=\"md-trash\" />\r\n                </Poptip>\r\n              </div>\r\n            </li>\r\n            <MyPage :pageModel=\"pageModel2\" @selectList=\"selectMessageList\" v-if=\"pageModel2.sumCount>10\"></MyPage>\r\n          </ul>\r\n          <ul class=\"noneli\" v-if=\"messagesTotal==0\">\r\n            你还没有留言\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </div>\r\n\r\n</template>\r\n\r\n\r\n<script>\r\nimport marked from 'marked'\r\nimport {mapGetters} from \"vuex\"\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      loading: true,\r\n      comments: {},\r\n      messages: {},\r\n      commentsTotal: 0,\r\n      messagesTotal: 0,\r\n      pageModel1: {\r\n        page: 1,\r\n        sumCount: 10\r\n      },\r\n      pageModel2: {\r\n        page: 1,\r\n        sumCount: 10\r\n      },\r\n    }\r\n  },\r\n  computed: mapGetters([\r\n    'user'\r\n  ]),  \r\n  created() {\r\n    this.getComment()\r\n    this.getMessage()\r\n  },\r\n  methods: {\r\n    getComment() {\r\n      this.$post('/api/v2/comment/person', this.pageModel1).then(res => {\r\n        this.loading = false\r\n        this.commentsTotal = res.data.total\r\n        this.comments = res.data.data\r\n        this.pageModel1.sumCount = res.data.total\r\n      }).catch(() => {})\r\n    },\r\n    selectCommentList() {\r\n      this.getComment()\r\n    },\r\n    // 删除评论\r\n    deleteComment(item) {\r\n      let param = {\r\n        id: item.id\r\n      }\r\n      this.$post('/api/v2/comment/delete', param).then(res => {\r\n        this.comments.splice(this.comments.indexOf(item), 1)\r\n        this.commentsTotal-=1\r\n        this.$Message.success(res.message)\r\n      }).catch(() => {})\r\n    }, \r\n    getMessage() {\r\n      this.$post('/api/v2/message/person', this.pageModel2).then(res => {\r\n        this.loading = false\r\n        this.messages = res.data.data\r\n        this.messagesTotal = res.data.total\r\n        this.pageModel2.sumCount = res.data.total\r\n      }).catch(() => {})\r\n    },\r\n    selectMessageList() {\r\n      this.getMessage()\r\n    },\r\n    // 删除留言\r\n    deleteMessage(item) {\r\n      let param = {\r\n        id: item.id\r\n      }\r\n      this.$post('/api/v2/message/delete', param).then(res => {\r\n        this.messages.splice(this.messages.indexOf(item), 1)\r\n        this.messagesTotal-=1\r\n        this.$Message.success(res.message)\r\n      }).catch(() => {})\r\n    }, \r\n  }, \r\n}\r\n</script>\r\n\r\n\r\n<style scoped lang=\"stylus\">\r\n.person\r\n  display flex\r\n  font-size 14px\r\n.leftinfo\r\n  width 270px\r\n  min-width 270px\r\n  line-height 30px\r\n  margin-right 30px\r\n  margin-bottom 30px\r\n  box-shadow: 2px 2px 14px #c0dbe6\r\n  height: max-content;\r\n  .info-top\r\n    display flex  \r\n    margin-bottom 20px\r\n    background: #ecf0f1;\r\n    padding: 20px;\r\n    img\r\n      width 86px\r\n      height 86px\r\n      border-radius 50%\r\n      box-shadow: 2px 2px 14px #c0dbe6\r\n    .top-text\r\n      padding-left 20px\r\n      .name\r\n        color #f7576c\r\n        font-size 20px\r\n      .time\r\n        color #90999c\r\n        padding-left 5px\r\n  ul\r\n    margin 20px\r\n    border 1px solid #ddebf1\r\n    border-radius 4px\r\n    li\r\n      line-height 44px\r\n      padding 0 20px\r\n      border-bottom 1px solid #ddebf1\r\n    li:last-child\r\n      border none\r\n    .link\r\n      cursor pointer\r\n\r\n\r\n.rightmain\r\n  flex 1 \r\n  width 0\r\n  >div \r\n    box-shadow: 2px 2px 14px #c0dbe6\r\n    margin-bottom 30px\r\n    h6\r\n      background: #ecf0f1\r\n      padding: 8px 20px;\r\n      font-size: 16px;\r\n      font-weight: 400;\r\n  ul\r\n    padding 5px 20px\r\n    li\r\n      padding 10px 0 15px\r\n      position relative\r\n      border-bottom 1px solid #ddebf1\r\n      .mark\r\n        padding 5px 0\r\n      .time\r\n        padding-top 5px\r\n        color #858a8c\r\n        i\r\n          margin -2px 6px 0 0\r\n    li:last-child\r\n      border none\r\n    .delete\r\n      position absolute\r\n      bottom: 13px;\r\n      right: 0px;\r\n      cursor pointer\r\n      i\r\n        font-size 20px\r\n        color #98aaaf\r\n\r\n.noneli\r\n  line-height: 35px;\r\n\r\n@media screen and (max-width: 750px)\r\n  .person\r\n    flex-direction: column;\r\n  .leftinfo\r\n    flex 1\r\n    width 100%\r\n    margin-right 0\r\n  .rightmain\r\n    width 100%\r\n</style>\r\n"]}]}